## 容器间通信

### 容器间Link单向通信 [A - > B]

```
Tomcat -> MySql

Docker创建的容器携带 "虚拟IP"
*：用IP进行通信的问题
  当服务进行重新部署时，就需要重新配置IP地址，所以十分的麻烦
  
*：使用容器名称进行通信
eg: docker run -d --name container_name1 --link target_container_name image_name
    这样进入container_name1内部ping target_container_name 就能ping的通
```

### 容器间Bridge网桥双向通信

![050570C3A01E100173A274312CA3FD76](/Users/leilimin/Library/Containers/com.tencent.qq/Data/Library/Caches/Images/050570C3A01E100173A274312CA3FD76.jpg)

* docker network ls
  * 查看docker网络服务的明细
* docker network creat -d bridge bridge_name
  * 创建新的docker 网络服务网桥
  * 后续使用这个网络网桥进行通信的容器就可以互联互通
* docker network connect bridge-name container_name
  * 将容器加入到网桥中
  * 不同的容器绑定到相同的网桥中就可以进行双向通信了

![16C3EA36097925BD35F387D882233EC2](/Users/leilimin/Library/Containers/com.tencent.qq/Data/Library/Caches/Images/16C3EA36097925BD35F387D882233EC2.png)

### 容器间数据共享

```
将容器间共用的文件存放在宿主机上，而不是由容器内部各自保留
```

![F2621668D3FC77EA0A58581FB4B25DE1](/Users/leilimin/Library/Containers/com.tencent.qq/Data/Library/Caches/Images/F2621668D3FC77EA0A58581FB4B25DE1.png)

* docker run --name container_name -v 宿主机路径:容器内挂载路径 image_name

* 通过--volumes-from共享容器内挂载点
  * docker create --name container_name1  -v 宿主机路径:容器内挂载路径 image_name1
  * docker run --volumes-from container_name1  --name container_name2 -d image_name2
  * 本质就是借用共享容器的挂载路径，不需要每次都编写宿主机到容器内的路径映射

